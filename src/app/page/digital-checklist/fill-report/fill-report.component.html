<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Fill Report</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div *ngFor="let dat of scheduleArr" #a>
    <ion-item >
      <ion-label class="ion-text-wrap">
        <h2><b>PC Name:</b> {{cc_desc}}</h2>
        <h2><b>Location:</b> {{pc_location}}</h2>
        <h2><b>Checklist Id:</b> {{checkListUniqeId}}</h2>
        <h2><b>Checklist:</b> {{dat.chk_cat_name}}</h2>
      </ion-label>
    </ion-item>
    <div *ngIf="dat.isResponseShow" class="ion-no-padding">
      <ion-card *ngFor="let val of dat.qus; let i = index" [ngClass]="{critical: val.critical_desc === 'Critical', noncritical: val.critical_desc === 'Non Critical', fullborder: val.isNotFill === true}">
        <ion-row >
          <ion-col size="1" class="center">
            <div style="height:20px;width:20px;font-size: small;border-radius: 50%;background-color:var(--ion-color-primary);color:var(--ion-color-light)" class="center">{{i+1}}</div>
          </ion-col>
          <ion-col>
            <ion-item>
              <ion-label class="ion-text-wrap" [innerHTML]="val.q_desc"></ion-label>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" class="ion-no-padding" >
            <ion-radio-group  [(ngModel)]="val.rspns" (ionChange)="changeResponseAction(val, $event)">
              <ion-row>
                <ion-col size="4" *ngFor="let opt of val.options">
                  <ion-item lines="none" [disabled]="schedule_status === 2 || schedule_status === 'attended'" >
                    <ion-label>{{opt.optn_desc}}</ion-label>
                    <ion-radio slot="start" [value]="opt.optn_id" style="margin-right:3px"></ion-radio>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-radio-group>
            <!-- <ion-item  *ngIf="val.q_type === '225'">
              <ion-label position="floating">Response</ion-label>
              <ion-input type="text" [(ngModel)]="val.rspns" (change)="changeResponseAction(val, $event)"></ion-input>
            </ion-item>
            <ion-row *ngIf="val.q_type === '230'">
              <ion-col>
                <ion-item >
                  <input  type="file" (change)="changeDocumentResponse($event, val)"/>
                </ion-item>
              </ion-col>
              <ion-col *ngIf="val.response" class="ion-text-right">
                <ion-button color="danger" (click)="viewDocs(val.rspns)" fill="clear">
                  <ion-icon name="attach-outline"></ion-icon>
                </ion-button>
              </ion-col>
            </ion-row> -->
          </ion-col>
        </ion-row>
        <ion-item [ngClass]="{redBorder: val.isRemarkMandatory === 1 }">
          <ion-input type="text" [(ngModel)]="val.remark" placeholder="Enter Remark" (change)="changeRemark(val)" [disabled]="schedule_status === 2 || schedule_status === 'attended'"></ion-input>
        </ion-item>
        <ion-row>
          <ion-col size="6" class="ion-no-padding" [hidden]="schedule_status === 2 || schedule_status === 'attended'">
            <ion-button size="small" [color]="!val.imagename ? 'primary': 'success'" [fill]="!val.imagename ? 'outline' : 'solid' " > <!--(click)="presentActionSheet(val)"-->
              IMG
              <ion-icon name="attach-outline" slot="end" *ngIf="!val.imagename"></ion-icon>
              <ion-icon name="checkmark-done-outline" slot="end" *ngIf="val.imagename"></ion-icon>
            </ion-button>
          </ion-col>
          <ion-col size="6" class="ion-text-right" *ngIf="val.attachment">
            <ion-button color="danger" (click)="viewDocs(val.attachment)" fill="clear">
              <ion-icon name="attach-outline"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-card>
    </div>
  </div>
  <ion-item [ngClass]="{fullborder: remarkErr}">
    <ion-label position="floating">Remark</ion-label>
    <ion-input type="text" [(ngModel)]="remark" [disabled]="schedule_status === 2 || schedule_status === 'attended' "></ion-input>
  </ion-item>
  <img [src]="sign_attachment" style="width:200px;height:200px;" *ngIf="sign_attachment" style="border:1px solid black">
  <ion-item lines="none" [hidden]="schedule_status === 2 || schedule_status === 'attended'">
    <ion-button (click)="openSign()" [fill]="signatureBase64 ? 'solid':'outline'">Signature <ion-icon name="checkmark-done-outline" slot="end" *ngIf="signatureBase64"></ion-icon></ion-button>
    <img [src]="signatureBase64" style="height:30px;width:30px;border:1px solid black" slot="end" *ngIf="signatureBase64">
  </ion-item>
</ion-content>
<ion-footer *ngIf="scheduleArr.length > 0" [hidden]="schedule_status === 2 || schedule_status === 'attended'">
  <ion-toolbar>
    <ion-button expand="block" (click)="finalSubmit()" tappable>Submit <ion-icon name="save-outline" slot="end"></ion-icon> </ion-button>
  </ion-toolbar>
</ion-footer>
